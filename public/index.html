<!-- public/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sriracha&display=swap" rel="stylesheet">
  <link rel="icon" href="Sankalp.jpg" type="image/x-icon">

  <title>Sankalp</title>
  <style>
    body {
      font-family: 'Sriracha', cursive, Verdana, sans-serif;
      font-weight: 500;
      margin: 20px;
      background-image: url('msg1775627985-4906.jpg');
      background-repeat: no-repeat;
      background-size: cover;
      filter: blur(0.5px); 
       }

    #chat-container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      background-image: url('public\vcet-logo@2x.png');
      background-repeat: no-repeat;
      overflow: hidden;
    }

    #header {
      display: flex;
      align-items: center;
      padding: 10px;
      background-color: #eee;
    }

    #header img {
      height: 50px; /* Adjust the height as needed */
      width: auto;
      border-radius: 50%;
      margin-right: 10px;
    }

    #header h1 {
      margin: 0;
      text-transform: uppercase;
    }

    #chat-container img{
      width: 100px; /* Adjust the width as needed */
      height: auto;
    }

    #messages {
      list-style-type: none;
      padding: 10px;
      margin: 0;
      overflow-y: auto;
      max-height: 300px;
      min-height: 300px;
    }

    #messages li {
      margin-bottom: 8px;
      padding: 8px;
      border-radius: 4px;
      display: flex;
      align-items: center;
    }

    #messages .user-message {
      color: #000000;
      justify-content: flex-end;
      border: 2px solid #faba66; /* Replace with your desired color */
      box-shadow: 0 0 10px hsla(27, 98%, 45%, 0.418);

      border-radius: 15px;
    }

    #messages .bot-message {
      border: 2px solid #6675FA; /* Replace with your desired color */
      border-radius: 15px;
      color: #000000; /* Set text color to black for better visibility */
      justify-content: flex-start;
    }

    .profile-circle {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background-color: #000000a4; /* Bot's profile picture color */
      margin-right: 8px;
      margin-left: 5px;
    }

    #messages .thinking {
      background-color: #6675FA;
      color: #000;
      justify-content: flex-start;
    }

    #chat-form {
      display: flex;
      padding: 10px;
      background-color: #eee;
      border-top: 1px solid #ccc;
    }

    #message-input {
      flex: 1;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-right: 10px;
    }

    #message-input:focus {
      outline: none;
      border-color: #007bff;
    }

    #send-button {
  display: flex;
  align-items: center;
  padding: 10px 15px;
  background: linear-gradient(to right, #6675FA, #0056b3);
  color: #fff;
  border: 1px solid #3f4e9a;
  border-radius: 25px;
  cursor: pointer;
  width: 18%;
  transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
}

#send-button:hover {
  background: linear-gradient(to right, #0056b3, #6675FA);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

#send-button:active {
  transform: scale(0.95);
}
    #chat-container.hidden {
    display: none;
  }

  img{
    width: 100px;
    height: auto;
    float: right;
  }

  .container img{
    width: 50px;
    height: auto;
  }

  .footer {
      background-color: #f0f0f0;
      text-align: center;
      width: 100%;
      margin-top: 40px;
    }

    .footer p {
      margin: 0;
      color: #555;
    }

    .social-icons {
      margin-top: 10px;
    }

    .social-icons a {
      margin: 0 8px;
      text-decoration: none;
      color: #555;
      font-size: 18px;
    }

    .modal {
          display: none;
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background-color: #fff;
          padding: 20px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
          z-index: 1;
          max-width: 80%;
          width: 300px;
          text-align: center;
          border-radius: 8px;
      }

      .close-btn {
          position: absolute;
          top: 10px;
          right: 10px;
          cursor: pointer;
          font-size: 1.5em;
          color: #0056b3;
      }

      .close-btn:hover {
          color: #6675FA;
      }

      .input-group {
          margin-bottom: 20px;
      }

      .input-group label {
          display: block;
          text-align: left;
          margin-bottom: 5px;
          color: #0056b3;
      }

      .backdrop {
            position: fixed;
            top: -40px;
            left: -40px;
            width: 120%;
            height: 110%;
            background: inherit;
            filter: blur(8px); /* Adjust the blur strength as needed */
            z-index: 1;
            display: none; /* Initially hidden */
        }

      .input-group input {
          width: 100%;
          padding: 8px;
          box-sizing: border-box;
          border: 1px solid #ccc;
          border-radius: 4px;
          outline: none;
          font-size: 1em;
      }

      .input-group input:focus {
          border-color: #6675FA;
      }

      button {
            background-color: #0056b3;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

      .userbutton{
        float: right;
        margin: 150px -88px 0px 0px;

      }

       @media (max-width: 600px) {
          .modal {
              max-width: 90%;
          }

          .userbutton{
            float: right;
            margin: 734px 0px 0px 73px;
            position: absolute;
          }
          .backdrop {
            height: 150%;
          }

          img{
            position: absolute;
            margin: 675px 0px -754px 223px;
          }

          .container img {
        display: none;
    }

      }
  </style>
</head>



<body>
  
    <div class="backdrop"></div>
    <img id="toggle-chat-button" class="model" src="Robot_transparent_background.png">
    <button onclick="openModal()" class="userbutton">User Info</button>

    <div id="myModal" class="modal" style="display: block;">
      <!-- Modal content -->
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2 style="color: #0056b3;">User Information</h2>
      <form onsubmit="submitForm(event)">
          <div class="input-group">
              <label for="username">Your Awesome Username:</label>
              <input type="text" id="username" name="username" required>
          </div>
  
          <div class="input-group">
              <label for="email">Your Epic Email:</label>
              <input type="email" id="email" name="email" required>
          </div>
  
          <button type="submit">Submit</button>
      </form>
  </div>


    <div id="chat-container" class="container">
      <div id="chat-container">
        <div id="header">
          <img src="Robot_transparent_background.png" alt="Profile Image">
          <h1>Sankalp</h1>
        </div>
      <ul id="messages"></ul>
      <form id="chat-form">
        <input id="message-input" placeholder="Type your message here" autocomplete="off" />
        <button id="send-button">Send</button>
      </form>
    </div>
  <footer>
    <div class="footer">
      <p>&copy; All rights reserved.</p><br>
      <p>Our SANKALP Chatbot might make mistakes.Consider checking important information</p><br>
      <p>Made with  &#x2665</p>
    </div>
  </footer>

    
    
    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
    <script>
     // Get the modal and backdrop elements
    var modal = document.getElementById("myModal");
    var backdrop = document.querySelector(".backdrop");

    // Function to close the modal and hide the backdrop
    function closeModal() {
        modal.style.display = "none";
        backdrop.style.display = "none";
    }

    function openModal() {
        modal.style.display = "block";
        backdrop.style.display = "block";
    }

    // Close the modal if the user clicks outside of it
    window.onclick = function (event) {
        if (event.target === modal) {
            closeModal();
        }
    }

    // Function to handle form submission
      async function submitForm(event) {
    try {
      // Prevent the default form submission
      event.preventDefault();

      // Get the form data
      const formData = new FormData(event.target);

      // Convert form data to an object
      const formDataObject = {};
      formData.forEach((value, key) => {
        formDataObject[key] = value;
      });

      // Log the form data (for debugging)
      console.log('Form Data:', formDataObject);

      // Send the form data using fetch or another AJAX method
      const response = await fetch('https://test11-byll.onrender.com/submit', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(formDataObject),
      });

      if (response.ok) {
        // Close the modal if the form submission is successful
        closeModal();
      } else {
        console.error('Error:', response.statusText);
      }
    } catch (error) {
      console.error('Error:', error.message);
    }
  
        event.preventDefault();
}

    // Display the modal and backdrop on page load
    window.onload = function () {
        modal.style.display = "block";
        backdrop.style.display = "block";
    }
  </script>
    <script>
      const socket = io();
  
      const form = document.querySelector('#chat-form');
      const input = document.querySelector('#message-input');
      const messages = document.querySelector('#messages');
      const chatContainer = document.querySelector('#chat-container');
      const toggleChatButton = document.querySelector('#toggle-chat-button');
          // Add an event listener to the toggle button
      toggleChatButton.addEventListener('click', function () {
        // Toggle the visibility of the chat container
        chatContainer.classList.toggle('hidden');
      });
      
      form.addEventListener('submit', async function (event) {
    event.preventDefault();
    const userMessage = input.value;
    if (userMessage) {
      // Display user message
      displayMessage('user', userMessage);

      // Send user message to Python server
      try {
        const response = await fetch('https://test-048m.onrender.com/bot', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ message: userMessage }),
        });

        if (response.ok) {
          const botResponse = await response.json();
          displayMessage('bot', botResponse.bot_reply);
        } else {
          console.error('Error receiving bot reply:', response.statusText);
        }
      } catch (error) {
        console.error('Error communicating with the Python server:', error.message);
      }

      input.value = '';
        }
      });
  
      function displayMessage(sender, message) {
        const li = document.createElement('li');
        const profileCircle = document.createElement('div');
        profileCircle.classList.add('profile-circle');
        li.textContent = message;

        if (sender === 'bot') {
          li.classList.add('bot-message');
        } else {
          li.classList.add('user-message');
          li.appendChild(profileCircle);

        }
  
        messages.appendChild(li);
        messages.scrollTop = messages.scrollHeight; // Scroll to the bottom
      }
    </script>

  </body>
  </html>
  

